Page Table II 
CS 241 
Sept. 16, 2013 
Physical RAM 
P
1
 V
irtu
al M
e
m
o
ry Sp
ace
 
… 
Stack 
Heap 
Used 
Used 
Used 
… 
Page Table 
For P1 
0x393ac 
Index: [0x39] 
Offset: 0x3ac 
Phys. 
Page:   
[0xffc] 
0xffc3ac 
Page Size: 4 KB 
Page Eviction 
Virtual Page #: 17 
Virtual Page #: 33 
Virtual Page #: 40 
Virtual Page #: 17 
Virtual Page #: 43 
Virtual Page #: 8 
Virtual Page #: 33 
Virtual Page #: 99 
Virtual Page #: 99 
Virtual Page #: 17 
Physical RAM 
Page Eviction Strategies 
• Optimal (OPT) 
 
• Least Recently Used (LRU) 
 
• Least Frequently used (LFU) 
 
• Not Recently Used (NRU) / Access Bit 
 
• Working Set 
 
Page Eviction 
Virtual Page #: 17 
Virtual Page #: 33 
Virtual Page #: 40 
Virtual Page #: 17 
Virtual Page #: 43 
Virtual Page #: 8 
Virtual Page #: 33 
Virtual Page #: 99 
Virtual Page #: 99 
Virtual Page #: 17 
Physical RAM 
Page Eviction 
Virtual Page #: 17 
Virtual Page #: 33 
Virtual Page #: 40 
Virtual Page #: 17 
Virtual Page #: 43 
Virtual Page #: 8 
Virtual Page #: 33 
Virtual Page #: 99 
Virtual Page #: 99 
Virtual Page #: 17 
Physical RAM 
Page Eviction 
Virtual Page #: 17 
Virtual Page #: 33 
Virtual Page #: 40 
Virtual Page #: 17 
Virtual Page #: 43 
Virtual Page #: 8 
Virtual Page #: 33 
Virtual Page #: 99 
Virtual Page #: 99 
Virtual Page #: 17 
Physical RAM 
Page Eviction 
Virtual Page #: 17 
Virtual Page #: 33 
Virtual Page #: 40 
Virtual Page #: 17 
Virtual Page #: 43 
Virtual Page #: 8 
Virtual Page #: 33 
Virtual Page #: 99 
Virtual Page #: 99 
Virtual Page #: 17 
Physical RAM 
Status Bit #2 
• Accessed (A) Bit: 
– This bit denotes if the page has been recently 
accessed. 
 
– A=1: The page has been recently accessed. 
– A=0: The page has not been recently accessed. 
• When the PTE is accessed, the R bit is set to 1.  The 
MMU will scan page tables when memory is needed. 
When the MMU scans the memory: 
– If R=1, R is set to 0. 
– If R=0, page is evicted. 
Status Bit #3 
• Dirty (D) Bit: 
– Denotes if the page has been written to, and 
needs to be updated on disk when paged out. 
 
– D=1: The page is “dirty” and needs to be written 
to disk when paged out. 
– D=0: The page is “clean” and does not need to be 
written to disk when paged out. 
Status Bit #4 
• Read/Write (R) Bit: 
– Denotes if the page is read-only or read/write. 
 
– R=1: The page is read/write. 
– R=0: The page is read-only. 
• Areas of memory when the binary source of the 
process is located would be read-only. 
Status Bit #5 
• Never eXecute (NX) Bit: 
– Denotes if the page’s content should never 
execute code. 
 
– NX=1: The content of the page should never be 
executed 
– NX=0: The content of the may be executed 
• Areas such as heap and stack memory, that should 
never contain executable code, would have NX=1. 
int subtract(int a, int *b) { 
     int c = a – *b; 
     return c; 
} 
 
int add(int a, int *b) { 
     int c = a + *b; 
     return c; 
} 
 
void main() { 
     int a = 4; 
     int *b = malloc(sizeof(int)); 
     *b = 7; 
     int c = add(a, b); 
     int d = subtract(c, b); 
} 
Virtual Memory 
Page Tabe 
P A D RW NX PAGE 
[100] 
[99] 
[98] 
[3] 
[2] 
[1] 
[0] 
RAM 
RAM Page 1 
RAM Page 0 
RAM Page 2 
RAM Page 3 
Hard Drive 
HD[0] 
HD[1] 
HD[2] 
HD[3] 
HD[4] 
HD[5] 
