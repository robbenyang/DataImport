NAT and File Systems 
CS 241 
Nov. 22, 2013 
Network Address Translation 
• One Solution: Network Address Translation 
– Allows multiple IP-enabled devices to connect 
using a single “public IP address”. 
 
PC  (192.168.0.2) 
Laptop  (192.168.0.3) 
iPad  (192.168.0.4) 
Phone  (192.168.0.5) 
 172.54.21.84 
Private Address Public Address 
LAN: “Local Area Internet” 
Network Address Translation 
• How does it work? 
– A NAT-enabled router modifies every IP packet as 
the packets travel through the router. 
 
 
 
 
– Stores a Network Address Translation Table: 
• Port  { Private IP Address, Port } 
 
NAT 
NAT: Consequences 
• Limited concurrent connections 
 
 
• Breaks “end-to-end connectivity” 
 
 
 
 
 
• IP addresses in application data 
File Systems 
• General Purpose File Systems 
– Hierarchical 
– Directory-based Access 
 
– Examples: 
• C:\Users\Wade\ 
• /usr/home/wade/ 
 
– Everything, including directories, have a file. 
File Systems 
• Directory File 
 
File Systems 
• i-node 
 
File Systems 
• i-node Content Pointers 
 
Example Problem #1 
• Example file system: 
– Each i-node contains 
• 10 direct entries 
• 1 single indirect 
• 1 double indirect 
• 1 triple indirect 
 
– Each disk block is 4 KB is size 
– Each disk pointer is 8 B long 
 
 
#1(a) 
• What is the maximum size of a file if we used 
only direct entries? 
#1(b) 
• What is the maximum size of a file if we used 
direct entries and the single indirect? 
#1(c) and #1(d) 
• What is the maximum size of a file if we used 
direct entries, the single indirect, and the 
double indirect? 
 
 
 
• What is the maximum size of a file? 
#1(c) and #1(d) 
• Detail how a 10 MB file would be stored? 
